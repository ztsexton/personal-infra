# OnePasswordItem to sync a test secret from 1Password to Kubernetes
# This will create a Secret named 'k3s-demo-secret' in the 'cert-manager' namespace.
#
# Prerequisites:
# 1. In 1Password:
#    - Vault: Kubernetes          # or whatever vault youâ€™re using
#    - Item name: k3s-demo-secret # must match the itemPath below
#    - Add fields (username/password/api-key/etc.) that you want as keys in the K8s Secret.
# 2. Commit this file into the same Git repo & path ArgoCD is already using for cert-manager.

apiVersion: onepassword.com/v1
kind: OnePasswordItem
metadata:
  name: k3s-demo-secret
  namespace: cert-manager
  # Optional: control Argo sync order if the operator/CRDs are in the same app
  # annotations:
  #   argocd.argoproj.io/sync-wave: "5"
spec:
  # Format: "vaults/<VAULT_NAME>/items/<ITEM_NAME_OR_ID>"
  itemPath: "vaults/Kubernetes/items/k3s-demo-secret"